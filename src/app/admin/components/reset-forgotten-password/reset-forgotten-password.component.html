<div class="row">
  <div class="col s12">
    <div class="card-panel z-depth-2">
      <span class="card-title flow-text">
        <i class="material-icons left">lock_open</i>Reset forgotten password
      </span>
    </div>
  </div>

  <div class="col s12">
    <div class="card-panel z-depth-2">

      <form [formGroup]="form">
        <div class="row">
          <div class="input-field col s8">
            <input formControlName="username" type="text" id="username" placeholder="Username">
            <span *ngIf="form.controls.username.touched && form.controls.username.errors?.required"
                  class="helper-text red-text">Specify office username or student ID</span>
            <!--<span *ngIf="userFound === true"-->
            <!--class="helper-text green-text">User Found</span>-->
            <div *ngIf="userFound === true" class="card col s12">
              <div class="card-content">
                <span class="card-title">
                  User
                </span>
                <hr>
               <div class="row">
                 <div class="col s2">
                   <img style="height: 70px; width: 70px;" src="../../../../assets/images/default-account-image.png" alt="">
                 </div>
                 <div class="col s10">
                   <table>
                     <tr *ngIf="account.department.student_department">
                       <td>Student Id</td>
                       <td>{{account.username}}</td>
                     </tr>
                     <tr>
                       <td>Full Name</td>
                       <td> {{account.first_name}} {{account.last_name }}</td>
                     </tr>
                     <tr>
                       <td>
                         {{account.department.student_department ? 'Department': 'Office'}}
                       </td>
                       <td>{{account.department.description}}</td>
                     </tr>
                   </table>
                 </div>
               </div>
              </div>
              <div class="row" *ngIf="account && userFound === true">
                <div class="col s4">
                  <button class="btn" (click)="generatePassword()">Reset Password</button>
                </div>
                <div *ngIf="generatedPassword" class="col s4">
                  <b>New Password: {{generatedPassword}}</b>
                </div>
              </div>
            </div>
            <!-- we have to expilicitly check is userFound is false to avoid null case -->
            <span *ngIf="userFound === false && !form.controls.username.errors?.required"
                  class="helper-text red-text">User Not Found</span>
          </div>
          <div class="input-field col s2">
            <button [disabled]="form.invalid" class="btn"  (click)="findAccount()">
              <i class="material-icons left">search</i> Find
            </button>
          </div>
        </div>

      </form>


    </div>
  </div>
</div>
